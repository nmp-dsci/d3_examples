<!doctype html>
<html>
  <head>
      <title>D3.js NSW POA map</title>
      <script src="../resources/d3.4.2.8.min.js" type="text/JavaScript"></script>
      <script src="../resources/topojson.v1.min.js" type="text/JavaScript"></script>
      <style>
      /* insert CSS */
    </style>
  </head>
  <body>

    <script>
      	var projection = d3
          .geoMercator() 
          .scale(4000)	  // zoom in 
          .rotate([-0.25, 0.25, 0]) 
          .center([146.9211, -31.2532]); // where to center SVG on  

        var path = d3.geoPath().projection(projection);

        var map = d3.select("body")
          .append("svg")
          .attr("width", 960)
          .attr("height", 500); 


        d3.queue()
          .defer(d3.json , "../data/POA_2016_NSW.geojson")
          .await(drawMaps);


          function drawMaps(error, map_json) {
          if (error) throw error;

          console.log('1: drawMaps function activated');
          
          // var postcodes = topojson.feature(map_json,map_json.features).features;

          // console.log('2: postcode to iter' + map_json.features[0]);

          map.selectAll("path")
            .data(map_json.features)
            .enter()
            .append("path")
            .attr("d", path)  
            .attr("fill", "green")
            .attr("fill-opacity", 0.5)
            .attr("stroke", "#222");   
            
          console.log("2: draw map complete");
        }        




    </script>
  </body>
</html>
